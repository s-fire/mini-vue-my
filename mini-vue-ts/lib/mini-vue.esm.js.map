{"version":3,"file":"mini-vue.esm.js","sources":["../src/runtime-core/component.ts","../src/runtime-core/render.ts","../src/runtime-core/vnode.ts","../src/runtime-core/createApp.ts","../src/runtime-core/h.ts"],"sourcesContent":["export function createComponentInstance(vnode) {\n  const component = {\n    vnode,\n    type:vnode.type\n  }\n  return component\n}\nexport function setupComponent(instance: { vnode: any }) {\n  /* \n    instance{  // 组件实例\n      vnode{  // 组件虚拟节点\n        type // 传入的App组件配置\n      } \n      type // 传入的App组件配置\n    }\n  */\n  // 实例化有状态组件\n  setupStatefulComponent(instance)\n}\n\nfunction setupStatefulComponent(instance: any) {\n  /* \n    instance{  // 组件实例\n      vnode{  // 组件虚拟节点\n        type // 传入的App组件配置\n      } \n      type // 传入的App组件配置\n    }\n  */\n  const Component = instance.type // 传入的App配置\n  // 取到App里的setup函数\n  const {setup} = Component\n  if (setup) {\n    const setupResult = setup()\n    handleSetupResult(instance,setupResult)\n  }\n}\nfunction handleSetupResult(instance,setupResult: any) {\n  // setup函数有可能返回函数或者对象\n  if (typeof(setupResult) === 'object') {\n    // 把setup返回的对象保存到实例上\n    instance.setupState = setupResult\n  }\n  finishComponentSetup(instance)\n}\n\nfunction finishComponentSetup(instance: any) {\n  const Component = instance.type\n  if (Component.render) {\n    instance.render =Component.render\n  }\n}\n\n","import { createComponentInstance, setupComponent } from \"./component\"\n\nexport function render(vnode,container) {\n  patch(vnode,container)\n}\nfunction patch(vnode,container) {\n  // 处理组件\n  processComponent(vnode,container)\n}\n// 处理组件\nfunction processComponent(vnode: any, container: any) {\n  // 挂载组件\n  mountComponent(vnode,container)\n}\n// 挂载组件\nfunction mountComponent(vnode: any,container) {\n  // 创建组件实例\n  const instance = createComponentInstance(vnode)\n  setupComponent(instance)\n  setupRederEffect(instance,container)\n}\n\n\n\nfunction setupRederEffect(instance:any,container) {\n  const subTree = instance.render()\n  // subTree h函数返回的内容\n  patch(subTree,container)\n}\n\n","export function createVnode(type,prop?,children?) {\n  // type传入的App配置\n  return {\n    type,\n    prop,\n    children\n  }\n  \n}","import { render } from \"./render\"\nimport { createVnode } from \"./vnode\"\n\nexport function createApp(rootComponent){\n  // 传入的App配置\n  return {\n    mount(rootContainer){\n      // 转换成虚拟节点\n      // component -> vnode\n      const vnode = createVnode(rootComponent)\n      render(vnode,rootContainer)\n    }\n  }\n}\n","import { createVnode } from \"./vnode\";\nexport function h(type,prop?,children?) {\n  return createVnode(type,prop,children)\n}"],"names":[],"mappings":"AAAM,SAAU,uBAAuB,CAAC,KAAK,EAAA;AAC3C,IAAA,MAAM,SAAS,GAAG;QAChB,KAAK;QACL,IAAI,EAAC,KAAK,CAAC,IAAI;KAChB,CAAA;AACD,IAAA,OAAO,SAAS,CAAA;AAClB,CAAC;AACK,SAAU,cAAc,CAAC,QAAwB,EAAA;AACrD;;;;;;;AAOE;;IAEF,sBAAsB,CAAC,QAAQ,CAAC,CAAA;AAClC,CAAC;AAED,SAAS,sBAAsB,CAAC,QAAa,EAAA;AAC3C;;;;;;;AAOE;AACF,IAAA,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAA;;AAE/B,IAAA,MAAM,EAAC,KAAK,EAAC,GAAG,SAAS,CAAA;AACzB,IAAA,IAAI,KAAK,EAAE;AACT,QAAA,MAAM,WAAW,GAAG,KAAK,EAAE,CAAA;AAC3B,QAAA,iBAAiB,CAAC,QAAQ,EAAC,WAAW,CAAC,CAAA;AACxC,KAAA;AACH,CAAC;AACD,SAAS,iBAAiB,CAAC,QAAQ,EAAC,WAAgB,EAAA;;AAElD,IAAA,IAAI,QAAO,WAAW,CAAC,KAAK,QAAQ,EAAE;;AAEpC,QAAA,QAAQ,CAAC,UAAU,GAAG,WAAW,CAAA;AAClC,KAAA;IACD,oBAAoB,CAAC,QAAQ,CAAC,CAAA;AAChC,CAAC;AAED,SAAS,oBAAoB,CAAC,QAAa,EAAA;AACzC,IAAA,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAA;IAC/B,IAAI,SAAS,CAAC,MAAM,EAAE;AACpB,QAAA,QAAQ,CAAC,MAAM,GAAE,SAAS,CAAC,MAAM,CAAA;AAClC,KAAA;AACH;;ACjDgB,SAAA,MAAM,CAAC,KAAK,EAAC,SAAS,EAAA;AACpC,IAAA,KAAK,CAAC,KAAe,CAAC,CAAA;AACxB,CAAC;AACD,SAAS,KAAK,CAAC,KAAK,EAAC,SAAS,EAAA;;AAE5B,IAAA,gBAAgB,CAAC,KAAe,CAAC,CAAA;AACnC,CAAC;AACD;AACA,SAAS,gBAAgB,CAAC,KAAU,EAAE,SAAc,EAAA;;AAElD,IAAA,cAAc,CAAC,KAAe,CAAC,CAAA;AACjC,CAAC;AACD;AACA,SAAS,cAAc,CAAC,KAAU,EAAC,SAAS,EAAA;;AAE1C,IAAA,MAAM,QAAQ,GAAG,uBAAuB,CAAC,KAAK,CAAC,CAAA;IAC/C,cAAc,CAAC,QAAQ,CAAC,CAAA;AACxB,IAAA,gBAAgB,CAAC,QAAkB,CAAC,CAAA;AACtC,CAAC;AAID,SAAS,gBAAgB,CAAC,QAAY,EAAC,SAAS,EAAA;AAC9C,IAAA,MAAM,OAAO,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAA;;AAEjC,IAAA,KAAK,CAAC,OAAiB,CAAC,CAAA;AAC1B;;SC5BgB,WAAW,CAAC,IAAI,EAAC,IAAK,EAAC,QAAS,EAAA;;IAE9C,OAAO;QACL,IAAI;QACJ,IAAI;QACJ,QAAQ;KACT,CAAA;AAEH;;ACLM,SAAU,SAAS,CAAC,aAAa,EAAA;;IAErC,OAAO;AACL,QAAA,KAAK,CAAC,aAAa,EAAA;;;AAGjB,YAAA,MAAM,KAAK,GAAG,WAAW,CAAC,aAAa,CAAC,CAAA;AACxC,YAAA,MAAM,CAAC,KAAmB,CAAC,CAAA;SAC5B;KACF,CAAA;AACH;;SCZgB,CAAC,CAAC,IAAI,EAAC,IAAK,EAAC,QAAS,EAAA;IACpC,OAAO,WAAW,CAAC,IAAI,EAAC,IAAI,EAAC,QAAQ,CAAC,CAAA;AACxC;;;;"}